**Отчёт по лабораторной работе №7** 

**Дисциплина: архитектура компьютеров и операционные системы** 

ИвановаМарияАлександровна

Содержание 

**1  Цель работы** 

Изучениекомандусловногоибезусловногопереходов.Приобретениенавыков написанияпрограммсиспользованиемпереходов.Знакомствосназначениеми структурои фа и лалистинга.

**2  Теоретическое введение** 

Дляреализацииветвлении вассемблереиспользуютсятакназываемыекоманды передачиуправленияиликомандыперехода.Можновыделить2типапереходов:

•условныи переход–выполнениеилиневыполнениепереходавопределенную точкупрограммывзависимостиотпроверкиусловия.

•безусловныи переход–выполнениепередачиуправлениявопределеннуюточку программыбезкаких-либоусловии .

Безусловныи переходвыполняетсяинструкцие и jmp. Инструкция cmp является однои изинструкции ,котораяпозволяетсравнитьоперандыивыставляетфлагив зависимостиотрезультатасравнения.Инструкция cmp являетсякомандо и сравнениядвухоперандовиимееттакои жеформат,какикомандавычитания.

Листинг(врамкахпонятии ногоаппарата NASM)—этоодинизвыходныхфаи лов, создаваемыхтранслятором.Онимееттекстовы и видинуженприотладке программы,таккаккроместроксамои программыонсодержитдополнительную информацию.

**3  Выполнение лабораторной работы** 

1. **Реализация переходов в NASM** 

Создаюкаталогдляпрограммлабораторнои работы№7,перехожувнегоисоздаю фаи л lab7-1.asm. (рис.3.1)

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.001.png)

*Рис 3.1: Созданиефайлов для лабораторной работы*

Ввожувфаи л lab7-1.asmтекстпрограммыизлистинга7.1.(рис.3.2).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.002.jpeg)

*Рис 3.2: Вводтекста программы из листинга 7.1* Создаюисполняемы и фа и лизапускаюего.(рис.3.3).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.003.png)

*Рис 3.3: Запуск программного кода*

Такимобразом,использованиеинструкции jmp\_label2 меняетпорядокисполнения инструкции ипозволяетвыполнитьинструкцииначинаясметки\_ label2, пропустив выводпервогосообщения.

Изменюпрограммутакимобразом,чтобыонавыводиласначала‘Сообщение№2’, потом‘Сообщение№1’изавершалаработу.Дляэтогоизменяютекстпрограммыв соответствиислистингом7.2.(рис.3.4).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.004.jpeg)

*Рис 3.4: Изменениетекста программы* Создаюисполняемы и фа и липроверяюегоработу.(рис.3.5).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.005.png)

*Рис 3.5: Созданиеисполняемого файла*

Затемизменяютекстпрограммы,добавиввначалепрограммыjmp\_label3,jmp

\_label2 вконцеметки jmp\_label3,jmp\_label1 добавляювконцеметки jmp\_label2, и добавляю jmp\_end вконцеметки jmp\_label1, (рис.3.6).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.006.jpeg)

*Рис 3.6: Изменениетекста программы* чтобывыводпрограммыбылследующим:(рис.3.7).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.007.png)

*Рис 3.7: Выводпрограммы*

Рассмотримпрограмму,котораяопределяетивыводитнаэкраннаибольшуюиз3 целочисленныхпеременных: A,B и C. Значениядля Aи C задаютсявпрограмме, значение B вводитьсясклавиатуры.

Создаюфаи л lab7-2.asmвкаталоге~/work/arch-pc/lab07. Текстпрограммыиз листинга7.3ввожув lab7-2.asm. (рис.3.8).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.008.jpeg)

*Рис 3.8: Вводтекста программы из листинга 7.3* Создаюисполняемы и фа и липроверьтеегоработу.(рис.3.9).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.009.png)

*Рис 3.9: Проверка работы файла* Фаи лработаеткорректно.

2. **Изучение структуры файлы листинга** 

Создаюфаи ллистингадляпрограммыизфаи ла lab7-2.asm. Открываюфаи л листинга lab7-2.lst спомощьютекстовогоредактораивнимательноизучаюего форматисодержимое.(рис.3.10).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.010.jpeg)*Рис 3.10: Изучениефайла листинга* Впредставленныхтрехстрочкахсодержатьсяследующиеданные:(рис3.11).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.011.png)

*Рис 3.11: Выбранныестроки файла*

“2”-номерстрокикода,“;Функциявычислениядлиннысообщения”-комментарии ккоду,неимеетадресаимашинногокода.

“3”-номерстрокикода,“slen”-названиефункции,неимеетадресаимашинного кода.

“4”-номерстрокикода,“00000000”-адресстроки,“53”-машинныи код,“pushebx”- исходныи текстпрограммы,инструкция“ push” помещаетоперанд“ ebx” встек.

Открываюфаи лспрограммои lab7-2.asmиввыбраннои мнои инструкциисдвумя операндамиудаляювыделенны и операнд.(рис.3.12).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.012.png)

*Рис 3.12: Удалениевыделенного операнда из кода* Выполняютрансляциюсполучениемфа и лалистинга.(рис.3.13).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.013.png)

*Рис 3.13: Получениефайла листинга*

Навыходеянеполучаюниодногофа и лаиз-заошибки:инструкция mov (единственнаявкодесодержитдваоперанда)неможетработать,имеятолькоодин операнд,из-зачегонарушаетсяработакода.

**4  Задания для самостоятельной работы** 

Пишупрограммунахождениянаименьшеи из3целочисленныхпеременных a,b и c. Значенияпеременныхвыбираюизтабл.7.5всоответствиисвариантом, полученнымпривыполнениилабораторнои работы№6.Мои вариантподномером 15,поэтомумоизначения-32,6и54.(рис.4.1).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.014.jpeg)

*Рис 4.1: Написаниепрограммы*

Создаюисполняемы и фа и липроверяюегоработу,подставляянеобходимые значение.(рис.4.2).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.015.png)

*Рис 4.2: Запуск файла и проверка его работы* Программаработаеткорректно.

Кодпрограммы:

%include'in\_out.asm'

section.data

msgdb" Наименьшеечисло:",0 h

Add'32'

Bdd'6'

Cdd'54'

section.bss

minresb10

section.text

global\_start

\_start:

;----------Записываем'A' впеременную'min' movecx,[A];'ecx=A'

mov[min],ecx;'min=A' ;----------Сравниваем'A' и'С'(каксимволы)

cmpecx,[B]; Сравниваем' A' и'С'

jlcheck\_C; если' A<C', топереходнаметку' check\_B', movecx,[B]; иначе' ecx=C'

mov[min],ecx;'min=C' ;----------Преобразование'min(A,C)' изсимволавчисло check\_C:

moveax,min

callatoi; Вызовподпрограммыпереводасимволавчисло mov[min],eax; записьпреобразованногочислав min ;----------Сравниваем'min(A,C)' и'B' (какчисла) movecx,[min]

cmpecx,[C]; Сравниваем' min(A,C)' и' B'

jl in; если'min(A,C)<B', топереходна' in',

movecx,[C]; иначе' ecx=B'

mov[min],ecx

;----------Выводрезультата

` `in:

moveax,msg

callsprint; Выводсообщения'Наименьшеечисло:' moveax,[min]

calliprintLF; Вывод' min(A,B,C)'

callquit; Выход

Пишупрограмму,котораядлявведенныхсклавиатурызначении хиавычисляет значениеивыводитрезультатвычислени и заданно и длямоеговариантафункции f(x):

a+10, еслих< a x+10, еслих>= a (рис.4.3).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.016.jpeg)

*Рис 4.3: Написаниепрограммы*

Создаюисполняемы и фа и липроверяюегоработудлязначени и хиа соответственно:(2;3),(4;2).(рис.4.4).

![](Aspose.Words.1402cbdb-f6fc-4f55-8100-95561c186552.017.jpeg)

*Рис 4.4: Запуск файла и проверка его работы* Программаработаеткорректно. Кодпрограммы:

%include'in\_out.asm'

section.data

msg1db" Введите x:",0h

msg2db" Введите a:",0h

msg3db" Ответ:",0h

section.bss

xresb10

aresb10

section.text

global\_start

\_start:

moveax,msg1

callsprint

movecx,x

movedx,10

callsread

moveax,x

callatoi; Вызовподпрограммыпереводасимволавчисло mov[x],eax; записьпреобразованногочислав' x'

moveax,msg2

callsprint

movecx,a

movedx,10

callsread

;----------Преобразование'a' изсимволавчисло

moveax,a

callatoi; Вызовподпрограммыпереводасимволавчисло mov[a],eax; записьпреобразованногочислав' a'

moveax,[x]

movebx,[a] cmpeax,ebx

jl in

jmp in1

` `in: moveax,msg3 callsprint moveax,[a] addeax,10 calliprintLF callquit; Выход  in1: moveax,msg3 callsprint moveax,[x] addeax,10 calliprintLF callquit; Выход

**5  Выводы** 

Поитогамданнои лабораторнои работыяизучилакомандыусловногои безусловногопереходов,приобреланавыкинаписанияпрограммсиспользованием переходовиознакомиласьсназначениемиструктуро и фа и лалистинга,чтопоможет мнепривыполнениипоследующихлабораторныхработ.

**6  Список литературы** 

1. GDB:TheGNUProjectDebugger.—URL:https://www.gnu.org/software/gdb/.
1. GNUBashManual.—2016.—URL:https://www.gnu.org/software/bash/manual/.
1. MidnightCommanderDevelopmentCenter.—2021.—URL:https://midnight- commander.org/.
1. NASMAssemblyLanguageTutorials.—2021.—URL:https://asmtutor.com/.
1. NewhamC.LearningthebashShell:UnixShellProgramming.—O’ReillyMedia, 2005.—354 с.—(InaNutshell).—ISBN0596009658.—URL:http:// www.amazon.com/Learningbash-Shell-Programming-Nutshell/dp/0596009658.
1. RobbinsA.BashPocketReference.—O’ReillyMedia,2016.—156 с.—ISBN 978-1491941591.
1. TheNASMdocumentation.—2021.—URL:https://www.nasm.us/docs.php.
1. ZarrelliG.MasteringBash.—PacktPublishing,2017.—502 с.—ISBN 9781784396879.
1. КолдаевВ.Д.,ЛупинС.А.АрхитектураЭВМ.—М.:Форум,2018.
1. КулясО.Л.,НикитинК.А.Курспрограммированияна ASSEMBLER.—М.: Солон-Пресс,2017.
1. НовожиловО.П.АрхитектураЭВМисистем.—М.:Юраи т,2016.
1. Расширенныи ассемблер: NASM.—2021.—URL:https://www.opennet.ru/docs/ RUS/nasm/.
1. Робачевскии А.,НемнюгинС.,СтесикО.Операционнаясистема UNIX.—2-еизд. —БХВПетербург,2010.—656с.—ISBN978-5-94157-538-1.
1. СтоляровА.Программированиенаязыкеассемблера NASM дляОС Unix.—2-е изд.—М.:МАКСПресс,2011.—URL:http://www.stolyarov.info/books/asm\_unix.
1. ТаненбаумЭ.Архитектуракомпьютера.—6-еизд.—СПб.:Питер,2013.—874 с.—(Классика ComputerScience).
1. ТаненбаумЭ.,БосХ.Современныеоперационныесистемы.—4-еизд.—СПб.: Питер,2015.—1120с.—(Классика ComputerScience).
